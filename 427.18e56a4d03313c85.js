"use strict";(self.webpackChunkngx_demo_app=self.webpackChunkngx_demo_app||[]).push([[427],{3427:(Ze,B,p)=>{p.r(B),p.d(B,{UserDetailsModule:()=>we});var A=p(9808),E=p(8775),u=p(5e3),$=p(4004),P=p(8505),q=p(262),re=p(2369),v=p(8160),M=p(9635),Y=p(1884);function R(e,n){const t={},s=[];for(const i of e){const r=i[n];s.push(r),t[r]=i}return{ids:s,asObject:t}}class oe{constructor(n){this.idKeyRef="idKey",this.entitiesKey=n.entitiesKey,this.idsKey=n.idsKey,this.idKeyRef=n.idKeyRef}}function z(e){const n=e?`idKey${(0,v.kC)(e)}`:"idKey",t=new oe({entitiesKey:e?`${e}Entities`:"entities",idsKey:e?`${e}Ids`:"ids",idKeyRef:n});return{[`${e}EntitiesRef`]:t,[`with${(0,v.kC)(e)}Entities`]:function s(i){let r={},c=[];const o=(null==i?void 0:i.idKey)||"id";return null!=i&&i.initialValue&&({ids:c,asObject:r}=R(i.initialValue,o)),{props:{[t.entitiesKey]:r,[t.idsKey]:c},config:{[n]:o}}}}}const{withEntities:k,EntitiesRef:d}=z("");function D(e,n={}){return function(t,s){const{ref:i=d}=n,{entitiesKey:r,idsKey:c}=i,{ids:o,asObject:a}=R(e,function K(e,n){return e.config[n.idKeyRef]}(s,i));return Object.assign({},t,{[r]:a,[c]:o})}}function H(e={}){const{ref:{entitiesKey:n,idsKey:t}=d}=e;return(0,M.z)(function U(e){return(0,Y.x)((n,t)=>n[e]===t[e])}(n),(0,$.U)(s=>s[t].map(i=>s[n][i])))}z("UI");(0,v.U4)("activeId",{initialValue:void 0}),(0,v.v8)("activeIds",{initialValue:[]});function G(e,n){return(0,Y.x)((t,s)=>n?n(t[e],s[e]):t[e]===s[e])}function Z(e){return{props:{requestsStatus:null!=e?e:{}},config:void 0}}function ee(e,n){const t={value:e};return"error"===e&&(t.error=n),t}function b(e,n,t){return function(s){return Object.assign({},s,{requestsStatus:Object.assign({},s.requestsStatus,{[e]:ee(n,t)})})}}function F(e){return(0,M.z)(G("requestsStatus"),(0,v.Ys)(n=>"pending"===function C(e){return function(n){var t;return null!=(t=n.requestsStatus[e])?t:{value:"idle"}}}(e)(n).value))}G("");const O=(0,v.MT)({name:"userPosts"},k(),Z());let ne=(()=>{class e{constructor(){this.userPosts$=O.pipe(H()),this.pending$=O.pipe(F("user-posts"))}setUserPosts(t){O.update(D(t))}setIsLoading(t){O.update(b("user-posts",t?"pending":"idle"))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const j=(0,v.MT)({name:"userAlbums"},k(),Z());let se=(()=>{class e{constructor(){this.userAlbums$=j.pipe(H()),this.pending$=j.pipe(F("user-albums"))}setUserAlbums(t){j.update(D(t))}setIsLoading(t){j.update(b("user-albums",t?"pending":"idle"))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const L=(0,v.MT)({name:"userDetails"},(0,v.vl)({user:null}),Z());let ie=(()=>{class e{constructor(){this.user$=L.pipe((0,v.Ys)(t=>t.user)),this.pending$=L.pipe(F("user-details"))}updateUser(t){L.update(s=>Object.assign(Object.assign({},s),{user:t}))}setIsLoading(t){L.update(b("user-details",t?"pending":"idle"))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ue=(()=>{class e{constructor(t,s,i,r){this.apiService=t,this.postsRepo=s,this.albumsRepo=i,this.userRepo=r}getUserPosts(t){return this.postsRepo.setIsLoading(!0),this.apiService.getPosts({filter:[{field:"userId",value:""+t}]}).pipe((0,$.U)(s=>s.items),(0,P.b)(s=>{this.postsRepo.setIsLoading(!1),this.postsRepo.setUserPosts(s)}),(0,q.K)(s=>{throw this.postsRepo.setIsLoading(!1),s}))}getUserAlbums(t){return this.albumsRepo.setIsLoading(!0),this.apiService.getAlbums({filter:[{field:"userId",value:""+t}]}).pipe((0,$.U)(s=>s.items),(0,P.b)(s=>{this.albumsRepo.setIsLoading(!1),this.albumsRepo.setUserAlbums(s)}),(0,q.K)(s=>{throw this.albumsRepo.setIsLoading(!1),s}))}getUser(t){return this.userRepo.setIsLoading(!0),this.apiService.getUser(t).pipe((0,P.b)(s=>{this.userRepo.setIsLoading(!1),this.userRepo.updateUser(s)}),(0,q.K)(s=>{throw this.userRepo.setIsLoading(!1),s}))}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(re.s),u.LFG(ne),u.LFG(se),u.LFG(ie))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ae=p(801),Ee=p(9444);function Re(e,n){if(1&e&&(u.TgZ(0,"div",4)(1,"fa-icon",5)(2,"span",6),u._uU(3,"Loading..."),u.qZA()()()),2&e){const t=u.oxw();u.xp6(1),u.Q6J("icon",t.faSpinner)("pulse",!0)}}function Ie(e,n){if(1&e&&(u.ynx(0),u.TgZ(1,"h2",7),u._uU(2),u.qZA(),u.TgZ(3,"div"),u._uU(4),u.qZA(),u.BQk()),2&e){const t=u.oxw();u.xp6(2),u.Oqu(t.user.name),u.xp6(2),u.xDo(" @",t.user.username," \u2014 ",t.user.email," \u2014 ",t.user.website," \u2014 ",t.user.company.name," \u2014 ",t.user.address.city," ")}}let Ce=(()=>{class e{constructor(){this.user=null,this.isLoading=!0,this.faSpinner=Ae.LM3}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-details-header"]],inputs:{user:"user",isLoading:"isLoading"},decls:4,vars:2,consts:[[1,"user-details-header"],[1,"container","pt-5","pb-5","text-white"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["role","status","data-testid","loading-spinner",3,"icon","pulse"],[1,"sr-only"],[1,"mb-3"]],template:function(t,s){1&t&&(u.TgZ(0,"header",0)(1,"div",1),u.YNc(2,Re,4,2,"div",2),u.YNc(3,Ie,5,6,"ng-container",3),u.qZA()()),2&t&&(u.xp6(2),u.Q6J("ngIf",s.isLoading),u.xp6(1),u.Q6J("ngIf",s.user))},directives:[A.O5,Ee.BN],styles:[".user-details-header[_ngcontent-%COMP%]{background:#2980B9}"],changeDetection:0}),e})();var Oe=p(6974);const je=function(e){return["/","album",e]};function Le(e,n){if(1&e&&(u.TgZ(0,"li",5)(1,"a",6),u._uU(2),u.qZA()()),2&e){const t=n.$implicit;u.xp6(1),u.Q6J("routerLink",u.VKq(2,je,t.id)),u.xp6(1),u.Oqu(t.title)}}let $e=(()=>{class e{constructor(){this.albums=[],this.isLoading=!0}trackByAlbum(t,s){return s.id}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-albums"]],inputs:{albums:"albums",isLoading:"isLoading"},decls:6,vars:4,consts:[[1,"card"],[1,"card-header"],[3,"isEmpty","isLoading"],[1,"list-group","list-group-flush"],["class","list-group-item text-truncate",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item","text-truncate"],[3,"routerLink"]],template:function(t,s){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._uU(2," Albums "),u.qZA(),u._UZ(3,"app-content-loading-status",2),u.TgZ(4,"ul",3),u.YNc(5,Le,3,4,"li",4),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("isEmpty",!s.albums.length)("isLoading",s.isLoading),u.xp6(2),u.Q6J("ngForOf",s.albums)("ngForTrackBy",s.trackByAlbum))},directives:[Oe.u,A.sg,E.yS],styles:[""],changeDetection:0}),e})();var Pe=p(3230);const qe=[{path:"",component:(()=>{class e{constructor(t,s,i,r,c){this.userDetails=t,this.route=s,this.postsRepo=i,this.albumsRepo=r,this.userRepo=c,this.posts$=this.postsRepo.userPosts$,this.postsPending$=this.postsRepo.pending$,this.albums$=this.albumsRepo.userAlbums$,this.albumsPending$=this.albumsRepo.pending$,this.user$=this.userRepo.user$,this.userPending$=this.userRepo.pending$}ngOnInit(){this.route.params.subscribe(t=>{const s=Number(t.id);this.userDetails.getUserPosts(s).subscribe(),this.userDetails.getUserAlbums(s).subscribe(),this.userDetails.getUser(s).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(Ue),u.Y36(E.gz),u.Y36(ne),u.Y36(se),u.Y36(ie))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-details-page"]],decls:11,vars:18,consts:[[3,"user","isLoading"],[1,"container","pt-3"],[1,"row"],[1,"col-12","col-lg-6","mb-3",3,"albums","isLoading"],[1,"col-12","col-lg-6","mb-3",3,"posts","isLoading"]],template:function(t,s){1&t&&(u._UZ(0,"app-user-details-header",0),u.ALo(1,"async"),u.ALo(2,"async"),u.TgZ(3,"div",1)(4,"div",2),u._UZ(5,"app-user-albums",3),u.ALo(6,"async"),u.ALo(7,"async"),u._UZ(8,"app-post-list",4),u.ALo(9,"async"),u.ALo(10,"async"),u.qZA()()),2&t&&(u.Q6J("user",u.lcZ(1,6,s.user$))("isLoading",u.lcZ(2,8,s.userPending$)),u.xp6(5),u.Q6J("albums",u.lcZ(6,10,s.albums$))("isLoading",u.lcZ(7,12,s.albumsPending$)),u.xp6(3),u.Q6J("posts",u.lcZ(9,14,s.posts$))("isLoading",u.lcZ(10,16,s.postsPending$)))},directives:[Ce,$e,Pe.c],pipes:[A.Ov],styles:[""],changeDetection:0}),e})()}];let Se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[E.Bz.forChild(qe)],E.Bz]}),e})();var De=p(4466);let we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[A.ez,Se,De.m]]}),e})()}}]);