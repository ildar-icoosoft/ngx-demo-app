{"version":3,"file":"src_app_features_photo_photo-details_photo-details_module_ts.js","mappings":"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","sources":["./src/app/features/photo/photo-details/akita-state/photo-details-store.ts","./src/app/features/photo/photo-details/akita-state/photo-details.query.ts","./src/app/features/photo/photo-details/akita-state/photo-details.service.ts","./src/app/features/photo/photo-details/components/photo-details-page/photo-details-page.component.html","./src/app/features/photo/photo-details/components/photo-details-page/photo-details-page.component.ts","./src/app/features/photo/photo-details/components/photo-details-title/photo-details-title.component.ts","./src/app/features/photo/photo-details/components/photo-details-title/photo-details-title.component.html","./src/app/features/photo/photo-details/photo-details-routing.module.ts","./src/app/features/photo/photo-details/photo-details.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Store, StoreConfig } from '@datorama/akita';\nimport { NormalizedPhotoEntity } from '../../../../core/normalizr/types/models/normalized-photo-entity';\nimport { NormalizedAlbumEntity } from '../../../../core/normalizr/types/models/normalized-album-entity';\n\nexport interface PhotoDetailsState {\n  photo: NormalizedPhotoEntity | null;\n  album: NormalizedAlbumEntity | null;\n  albumLoading: boolean;\n}\n\nexport function createInitialState(): PhotoDetailsState {\n  return {\n    photo: null,\n    album: null,\n    albumLoading: true,\n  };\n}\n\n@Injectable({ providedIn: 'root' })\n@StoreConfig({ name: 'photo-details' })\nexport class PhotoDetailsStore extends Store<PhotoDetailsState> {\n  constructor() {\n    super(createInitialState());\n  }\n\n  setAlbumLoading(val: boolean) {\n    this.update({\n      albumLoading: val,\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Query } from '@datorama/akita';\nimport { map, Observable } from 'rxjs';\nimport { PhotoDetailsState, PhotoDetailsStore } from './photo-details-store';\nimport { Breadcrumb } from '../../../../shared/components/breadcrumbs/breadcrumbs.component';\n\n@Injectable({ providedIn: 'root' })\nexport class PhotoDetailsQuery extends Query<PhotoDetailsState> {\n  constructor(protected override store: PhotoDetailsStore) {\n    super(store);\n  }\n\n  selectBreadcrumbs(): Observable<Breadcrumb[] | null> {\n    return this.select('photo').pipe(\n      map((photo) => {\n        if (!photo) return null;\n\n        return [\n          {\n            link: '',\n            text: 'Dashboard',\n          },\n          {\n            link: ['/', 'photos'],\n            text: 'Photos',\n          },\n          {\n            link: null,\n            text: photo.id + '. ' + photo.title,\n          },\n        ];\n      }),\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { mergeMap } from 'rxjs';\nimport { PhotoDetailsStore } from './photo-details-store';\nimport { ApiService } from '../../../../core/services/api.service';\n\n@Injectable({ providedIn: 'root' })\nexport class PhotoDetailsService {\n  constructor(private photoDetailsStore: PhotoDetailsStore, private apiService: ApiService) {}\n\n  getPhoto(photoId: number): void {\n    this.photoDetailsStore.setLoading(true);\n    this.photoDetailsStore.setAlbumLoading(true);\n    this.apiService\n      .getSinglePhoto(photoId)\n      .pipe(\n        mergeMap((photo) => {\n          this.photoDetailsStore.update({\n            photo,\n          });\n          this.photoDetailsStore.setLoading(false);\n          return this.apiService.getSingleAlbum(photo.album);\n        }),\n      )\n      .subscribe({\n        next: (album) => {\n          this.photoDetailsStore.update({\n            album,\n          });\n          this.photoDetailsStore.setAlbumLoading(false);\n        },\n        error: () => {\n          this.photoDetailsStore.setLoading(false);\n          this.photoDetailsStore.setAlbumLoading(false);\n        },\n      });\n  }\n}\n","<div class=\"container pt-3\">\n  <app-content-loading-status\n    [isEmpty]=\"(photo$ | async) === null\"\n    [isLoading]=\"(photoLoadInProcess$ | async)!\"\n  ></app-content-loading-status>\n\n  <app-breadcrumbs *ngIf=\"breadcrumbs$ | async as breadcrumbs\" [items]=\"breadcrumbs\"></app-breadcrumbs>\n\n  <app-photo-details-title\n    [photo]=\"photo$ | async\"\n    [album]=\"album$ | async\"\n  ></app-photo-details-title>\n\n  <img *ngIf=\"photo$ | async as photo\" [src]=\"photo.url\" [alt]=\"photo.title\" [title]=\"photo.title\">\n</div>\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { PhotoDetailsService } from '../../akita-state/photo-details.service';\nimport { Observable } from 'rxjs';\nimport { Breadcrumb } from '../../../../../shared/components/breadcrumbs/breadcrumbs.component';\nimport { PhotoDetailsQuery } from '../../akita-state/photo-details.query';\nimport { NormalizedPhotoEntity } from '../../../../../core/normalizr/types/models/normalized-photo-entity';\nimport { NormalizedAlbumEntity } from '../../../../../core/normalizr/types/models/normalized-album-entity';\n\n@Component({\n  selector: 'app-photo-details-page',\n  templateUrl: './photo-details-page.component.html',\n  styleUrls: ['./photo-details-page.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PhotoDetailsPageComponent implements OnInit {\n  breadcrumbs$: Observable<Breadcrumb[] | null> = this.photoDetailsQuery.selectBreadcrumbs();\n\n  photo$: Observable<NormalizedPhotoEntity | null> = this.photoDetailsQuery.select('photo');\n\n  photoLoadInProcess$: Observable<boolean> = this.photoDetailsQuery.selectLoading();\n\n  album$: Observable<NormalizedAlbumEntity | null> = this.photoDetailsQuery.select('album');\n\n  albumLoadInProcess$: Observable<boolean> = this.photoDetailsQuery.select('albumLoading');\n\n  constructor(\n    private route: ActivatedRoute,\n    private photoDetailsService: PhotoDetailsService,\n    private photoDetailsQuery: PhotoDetailsQuery,\n  ) {}\n\n  ngOnInit(): void {\n    this.route.params.subscribe((params) => {\n      const photoId = Number(params['id']);\n      this.photoDetailsService.getPhoto(photoId);\n    });\n  }\n}\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\nimport { NormalizedAlbumEntity } from '../../../../../core/normalizr/types/models/normalized-album-entity';\nimport { NormalizedPhotoEntity } from '../../../../../core/normalizr/types/models/normalized-photo-entity';\n\n@Component({\n  selector: 'app-photo-details-title',\n  templateUrl: './photo-details-title.component.html',\n  styleUrls: ['./photo-details-title.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PhotoDetailsTitleComponent {\n  @Input() photo: NormalizedPhotoEntity | null = null;\n\n  @Input() album: NormalizedAlbumEntity | null = null;\n}\n","<h2 *ngIf=\"photo\">\n  {{photo.title}}\n</h2>\n<div *ngIf=\"album\" class=\"mb-2\">\n  View Album <a [routerLink]=\"['/', 'album', album.id]\">{{album.title}}</a>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PhotoDetailsPageComponent } from './components/photo-details-page/photo-details-page.component';\n\nconst routes: Routes = [{ path: '', component: PhotoDetailsPageComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PhotoDetailsRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PhotoDetailsRoutingModule } from './photo-details-routing.module';\nimport { PhotoDetailsPageComponent } from './components/photo-details-page/photo-details-page.component';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { PhotoDetailsTitleComponent } from './components/photo-details-title/photo-details-title.component';\n\n@NgModule({\n  declarations: [PhotoDetailsPageComponent, PhotoDetailsTitleComponent],\n  imports: [CommonModule, PhotoDetailsRoutingModule, SharedModule],\n})\nexport class PhotoDetailsModule {}\n"],"names":["i0","photo_r3","PhotoDetailsPageComponent","constructor","route","photoDetailsService","photoDetailsQuery","selectBreadcrumbs","select","selectLoading","ngOnInit","params","subscribe","photoId","Number","getPhoto","selectors","decls","vars","consts","template"],"sourceRoot":"webpack:///"}