"use strict";(self.webpackChunkngx_demo_app=self.webpackChunkngx_demo_app||[]).push([[474],{3474:(X,b,n)=>{n.r(b),n.d(b,{AlbumPhotosModule:()=>G});var c=n(9808),m=n(8775),t=n(5e3),d=n(8490),P=n(445),h=n(9384),v=n(4004),A=n(655);let u=class extends h.yh{constructor(){super({album:null,user:null,userLoading:!0})}setUserLoading(s){this.update({userLoading:s})}};u.\u0275fac=function(s){return new(s||u)},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u=(0,A.gn)([(0,h.yC)({name:"current-album"})],u);let g=(()=>{class e extends h.AE{constructor(o){super(o),this.store=o}selectBreadcrumbs(){return this.select("album").pipe((0,v.U)(o=>o?[{link:"",text:"Dashboard"},{link:["/","albums"],text:"Albums"},{link:null,text:o.id+". "+o.title}]:null))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=n(5577),C=n(2369);let I=(()=>{class e{constructor(o,r){this.currentAlbumStore=o,this.apiService=r}getAlbum(o){this.currentAlbumStore.setLoading(!0),this.currentAlbumStore.setUserLoading(!0),this.apiService.getSingleAlbum(o).pipe((0,y.z)(r=>(this.currentAlbumStore.update({album:r}),this.currentAlbumStore.setLoading(!1),this.apiService.getUser(r.user)))).subscribe({next:r=>{this.currentAlbumStore.update({user:r}),this.currentAlbumStore.setUserLoading(!1)},error:()=>{this.currentAlbumStore.setLoading(!1),this.currentAlbumStore.setUserLoading(!1)}})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u),t.LFG(C.s))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=n(2834),F=n(801),T=n(9444);function Z(e,s){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.album.title,"\n")}}const Q=function(e){return["/","user",e]};function x(e,s){if(1&e&&(t.TgZ(0,"div",2),t._uU(1," By "),t.TgZ(2,"a",3),t._uU(3),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(2,Q,o.albumAuthor.id)),t.xp6(1),t.Oqu(o.albumAuthor.name)}}function J(e,s){if(1&e&&(t.TgZ(0,"div")(1,"fa-icon",4)(2,"span",5),t._uU(3,"Loading..."),t.qZA()()()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("icon",o.faSpinner)("pulse",!0)}}let Y=(()=>{class e{constructor(){this.album=null,this.albumLoadInProcess=!0,this.albumAuthor=null,this.albumAuthorLoadInProcess=!0,this.faSpinner=F.LM3}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-album-photos-title"]],inputs:{album:"album",albumLoadInProcess:"albumLoadInProcess",albumAuthor:"albumAuthor",albumAuthorLoadInProcess:"albumAuthorLoadInProcess"},decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[3,"routerLink"],["role","status","data-testid","loading-spinner",3,"icon","pulse"],[1,"sr-only"]],template:function(o,r){1&o&&(t.YNc(0,Z,2,1,"h2",0),t.YNc(1,x,4,4,"div",1),t.YNc(2,J,4,2,"div",0)),2&o&&(t.Q6J("ngIf",r.album&&!r.albumLoadInProcess),t.xp6(1),t.Q6J("ngIf",r.albumAuthor&&!r.albumAuthorLoadInProcess),t.xp6(1),t.Q6J("ngIf",r.albumLoadInProcess||r.albumAuthorLoadInProcess))},directives:[c.O5,m.yS,T.BN],styles:[""],changeDetection:0}),e})();var l=n(3075),$=n(9468),M=n(4986),f=n(911);let a=class{constructor(){this.changeFilter=new t.vpe,this.group=new l.cw({q:new l.NI("")})}ngOnInit(){this.group.valueChanges.pipe((0,$.p)(1e3,M.z,{trailing:!0}),(0,f.t)(this)).subscribe(s=>{const o=[];s.q&&o.push({field:"q",value:s.q}),this.changeFilter.emit(o)})}trackByAlbum(s,o){return o.id}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-album-photos-filter"]],outputs:{changeFilter:"changeFilter"},decls:2,vars:1,consts:[[1,"d-flex",3,"formGroup"],["formControlName","q","placeholder","Search",1,"form-control","me-2"]],template:function(s,o){1&s&&(t.TgZ(0,"form",0),t._UZ(1,"input",1),t.qZA()),2&s&&t.Q6J("formGroup",o.group)},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""],changeDetection:0}),a=(0,A.gn)([(0,f.c)()],a);let U=(()=>{class e{constructor(o,r){this.albumQuery=o,this.photosService=r}changeFilter(o){const i=this.albumQuery.getValue().album;this.photosService.updateFilter([...o,{field:"albumId",value:String(i.id)}])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g),t.Y36(d.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-album-photos-filter-container"]],decls:1,vars:0,consts:[[3,"changeFilter"]],template:function(o,r){1&o&&(t.TgZ(0,"app-album-photos-filter",0),t.NdJ("changeFilter",function(p){return r.changeFilter(p)}),t.qZA())},directives:[a],styles:[""],changeDetection:0}),e})();var B=n(9118);function N(e,s){1&e&&t._UZ(0,"app-breadcrumbs",5),2&e&&t.Q6J("items",s.ngIf)}const z=[{path:"",component:(()=>{class e{constructor(o,r,i,p,j){this.photosService=o,this.photosQuery=r,this.currentAlbumQuery=i,this.currentAlbumService=p,this.route=j,this.breadcrumbs$=this.currentAlbumQuery.selectBreadcrumbs(),this.album$=this.currentAlbumQuery.select("album"),this.albumLoadInProcess$=this.currentAlbumQuery.selectLoading(),this.albumAuthor$=this.currentAlbumQuery.select("user"),this.albumAuthorLoadInProcess$=this.currentAlbumQuery.select("userLoading"),this.photos$=this.photosQuery.selectAll(),this.isLastPage$=this.photosQuery.isLastPage(),this.photosLoadInProcess$=this.photosQuery.selectLoading()}ngOnInit(){this.route.params.subscribe(o=>{const r=o.id;this.photosService.getPhotos({page:{number:1,size:36},filter:[{field:"albumId",value:r}]}),this.currentAlbumService.getAlbum(Number(r))})}loadMore(){this.photosService.getNextPhotos()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.B),t.Y36(P.x),t.Y36(g),t.Y36(I),t.Y36(m.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-album-photos-page"]],decls:13,vars:25,consts:[[1,"container","pt-3"],[3,"items",4,"ngIf"],[3,"album","albumLoadInProcess","albumAuthor","albumAuthorLoadInProcess"],[1,"d-block","mb-2"],[3,"photos","isLastPage","loadInProcess","showAlbumLink","loadMore"],[3,"items"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.YNc(1,N,1,1,"app-breadcrumbs",1),t.ALo(2,"async"),t._UZ(3,"app-album-photos-title",2),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t._UZ(8,"app-album-photos-filter-container",3),t.TgZ(9,"app-photo-list",4),t.NdJ("loadMore",function(){return r.loadMore()}),t.ALo(10,"async"),t.ALo(11,"async"),t.ALo(12,"async"),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,9,r.breadcrumbs$)),t.xp6(2),t.Q6J("album",t.lcZ(4,11,r.album$))("albumLoadInProcess",t.lcZ(5,13,r.albumLoadInProcess$))("albumAuthor",t.lcZ(6,15,r.albumAuthor$))("albumAuthorLoadInProcess",t.lcZ(7,17,r.albumAuthorLoadInProcess$)),t.xp6(6),t.Q6J("photos",t.lcZ(10,19,r.photos$))("isLastPage",t.lcZ(11,21,r.isLastPage$))("loadInProcess",t.lcZ(12,23,r.photosLoadInProcess$))("showAlbumLink",!1))},directives:[c.O5,S.n,Y,U,B.Y],pipes:[c.Ov],styles:[""],changeDetection:0}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(z)],m.Bz]}),e})();var D=n(4466);let G=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,O,D.m]]}),e})()}}]);