{"version":3,"file":"src_app_features_photo_photo-list_album-photos_album-photos_module_ts.js","mappings":"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","sources":["./src/app/features/photo/photo-list/album-photos/akita-state/current-album.query.ts","./src/app/features/photo/photo-list/album-photos/akita-state/current-album.service.ts","./src/app/features/photo/photo-list/album-photos/akita-state/current-album.store.ts","./src/app/features/photo/photo-list/album-photos/album-photos-routing.module.ts","./src/app/features/photo/photo-list/album-photos/album-photos.module.ts","./src/app/features/photo/photo-list/album-photos/components/filter/album-photos-filter.component.ts","./src/app/features/photo/photo-list/album-photos/components/filter/album-photos-filter.component.html","./src/app/features/photo/photo-list/album-photos/components/filter/container/album-photos-filter-container.component.ts","./src/app/features/photo/photo-list/album-photos/components/filter/container/album-photos-filter-container.component.html","./src/app/features/photo/photo-list/album-photos/components/page/album-photos-page.component.html","./src/app/features/photo/photo-list/album-photos/components/page/album-photos-page.component.ts","./src/app/features/photo/photo-list/album-photos/components/title/album-photos-title.component.ts","./src/app/features/photo/photo-list/album-photos/components/title/album-photos-title.component.html"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Query } from '@datorama/akita';\nimport { CurrentAlbumStore, CurrentAlbumState } from './current-album.store';\nimport { map, Observable } from 'rxjs';\nimport { Breadcrumb } from '../../../../../shared/components/breadcrumbs/breadcrumbs.component';\n\n@Injectable({ providedIn: 'root' })\nexport class CurrentAlbumQuery extends Query<CurrentAlbumState> {\n  constructor(protected override store: CurrentAlbumStore) {\n    super(store);\n  }\n\n  selectBreadcrumbs(): Observable<Breadcrumb[] | null> {\n    return this.select('album').pipe(\n      map((album) => {\n        if (!album) return null;\n\n        return [\n          {\n            link: '',\n            text: 'Dashboard',\n          },\n          {\n            link: ['/', 'albums'],\n            text: 'Albums',\n          },\n          {\n            link: null,\n            text: album.id + '. ' + album.title,\n          },\n        ];\n      }),\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CurrentAlbumStore } from './current-album.store';\nimport { ApiService } from '../../../../../core/services/api.service';\nimport { mergeMap } from 'rxjs';\n\n@Injectable({ providedIn: 'root' })\nexport class CurrentAlbumService {\n  constructor(private currentAlbumStore: CurrentAlbumStore, private apiService: ApiService) {}\n\n  getAlbum(albumId: number): void {\n    this.currentAlbumStore.setLoading(true);\n    this.currentAlbumStore.setUserLoading(true);\n    this.apiService\n      .getSingleAlbum(albumId)\n      .pipe(\n        mergeMap((album) => {\n          this.currentAlbumStore.update({\n            album,\n          });\n          this.currentAlbumStore.setLoading(false);\n          return this.apiService.getUser(album.user);\n        }),\n      )\n      .subscribe({\n        next: (user) => {\n          this.currentAlbumStore.update({\n            user,\n          });\n          this.currentAlbumStore.setUserLoading(false);\n        },\n        error: () => {\n          this.currentAlbumStore.setLoading(false);\n          this.currentAlbumStore.setUserLoading(false);\n        },\n      });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Store, StoreConfig } from '@datorama/akita';\nimport { NormalizedAlbumEntity } from '../../../../../core/normalizr/types/models/normalized-album-entity';\nimport { NormalizedUserEntity } from '../../../../../core/normalizr/types/models/normalized-user-entity';\n\nexport interface CurrentAlbumState {\n  album: NormalizedAlbumEntity | null;\n  user: NormalizedUserEntity | null;\n  userLoading: boolean;\n}\n\nexport function createInitialState(): CurrentAlbumState {\n  return {\n    album: null,\n    user: null,\n    userLoading: true,\n  };\n}\n\n@Injectable({ providedIn: 'root' })\n@StoreConfig({ name: 'current-album' })\nexport class CurrentAlbumStore extends Store<CurrentAlbumState> {\n  constructor() {\n    super(createInitialState());\n  }\n\n  setUserLoading(val: boolean) {\n    this.update({\n      userLoading: val,\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AlbumPhotosPageComponent } from './components/page/album-photos-page.component';\n\nconst routes: Routes = [{ path: '', component: AlbumPhotosPageComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AlbumPhotosRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AlbumPhotosRoutingModule } from './album-photos-routing.module';\nimport { AlbumPhotosPageComponent } from './components/page/album-photos-page.component';\nimport { SharedModule } from '../../../../shared/shared.module';\nimport { AlbumPhotosFilterComponent } from './components/filter/album-photos-filter.component';\nimport { AlbumPhotosFilterContainerComponent } from './components/filter/container/album-photos-filter-container.component';\nimport { AlbumPhotosTitleComponent } from './components/title/album-photos-title.component';\n\n@NgModule({\n  declarations: [\n    AlbumPhotosPageComponent,\n    AlbumPhotosFilterComponent,\n    AlbumPhotosFilterContainerComponent,\n    AlbumPhotosTitleComponent,\n  ],\n  imports: [CommonModule, AlbumPhotosRoutingModule, SharedModule],\n})\nexport class AlbumPhotosModule {}\n","import { Component, OnInit, ChangeDetectionStrategy, Output, EventEmitter } from '@angular/core';\nimport { PageRequestFilterField } from '../../../../../../core/types/pagination/page-request';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { asyncScheduler, throttleTime } from 'rxjs';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { NormalizedAlbumEntity } from '../../../../../../core/normalizr/types/models/normalized-album-entity';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-album-photos-filter',\n  templateUrl: './album-photos-filter.component.html',\n  styleUrls: ['./album-photos-filter.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AlbumPhotosFilterComponent implements OnInit {\n  @Output() changeFilter = new EventEmitter<PageRequestFilterField[]>();\n\n  group = new FormGroup({\n    q: new FormControl(''),\n  });\n\n  ngOnInit(): void {\n    this.group.valueChanges\n      .pipe(throttleTime(1000, asyncScheduler, { trailing: true }), untilDestroyed(this))\n      .subscribe((value) => {\n        const filter: PageRequestFilterField[] = [];\n        if (value.q) {\n          filter.push({\n            field: 'q',\n            value: value.q,\n          });\n        }\n        this.changeFilter.emit(filter);\n      });\n  }\n\n  trackByAlbum(index: number, album: NormalizedAlbumEntity): number {\n    return album.id;\n  }\n}\n","<form class=\"d-flex\" [formGroup]=\"group\">\n  <input formControlName=\"q\" placeholder=\"Search\" class=\"form-control me-2\">\n</form>\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { PhotoListService } from '../../../../akita-state/photo-list.service';\nimport { PageRequestFilterField } from '../../../../../../../core/types/pagination/page-request';\nimport { CurrentAlbumQuery } from '../../../akita-state/current-album.query';\nimport { NormalizedAlbumEntity } from '../../../../../../../core/normalizr/types/models/normalized-album-entity';\n\n@Component({\n  selector: 'app-album-photos-filter-container',\n  templateUrl: './album-photos-filter-container.component.html',\n  styleUrls: ['./album-photos-filter-container.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AlbumPhotosFilterContainerComponent {\n  constructor(private albumQuery: CurrentAlbumQuery, private photosService: PhotoListService) {}\n\n  changeFilter(filter: PageRequestFilterField[]): void {\n    const state = this.albumQuery.getValue();\n    const album = state.album as NormalizedAlbumEntity;\n\n    this.photosService.updateFilter([\n      ...filter,\n      {\n        field: 'albumId',\n        value: String(album.id),\n      },\n    ]);\n  }\n}\n","<app-album-photos-filter\n  (changeFilter)=\"changeFilter($event)\"\n></app-album-photos-filter>\n","<div class=\"container pt-3\">\n  <app-breadcrumbs *ngIf=\"breadcrumbs$ | async as breadcrumbs\" [items]=\"breadcrumbs\"></app-breadcrumbs>\n\n  <app-album-photos-title\n    [album]=\"album$ | async\"\n    [albumLoadInProcess]=\"(albumLoadInProcess$ | async)!\"\n    [albumAuthor]=\"albumAuthor$ | async\"\n    [albumAuthorLoadInProcess]=\"(albumAuthorLoadInProcess$ | async)!\"\n  ></app-album-photos-title>\n\n  <app-album-photos-filter-container class=\"d-block mb-2\"></app-album-photos-filter-container>\n\n  <app-photo-list\n    [photos]=\"(photos$ | async)!\"\n    [isLastPage]=\"(isLastPage$ | async)!\"\n    [loadInProcess]=\"(photosLoadInProcess$ | async)!\"\n    [showAlbumLink]=\"false\"\n    (loadMore)=\"loadMore()\"\n  ></app-photo-list>\n</div>\n","import { Component, ChangeDetectionStrategy, OnInit } from '@angular/core';\nimport { Breadcrumb } from '../../../../../../shared/components/breadcrumbs/breadcrumbs.component';\nimport { Observable } from 'rxjs';\nimport { NormalizedPhotoEntity } from '../../../../../../core/normalizr/types/models/normalized-photo-entity';\nimport { NormalizedAlbumEntity } from '../../../../../../core/normalizr/types/models/normalized-album-entity';\nimport { PhotoListService } from '../../../akita-state/photo-list.service';\nimport { PhotoListQuery } from '../../../akita-state/photo-list.query';\nimport { ActivatedRoute } from '@angular/router';\nimport { CurrentAlbumQuery } from '../../akita-state/current-album.query';\nimport { CurrentAlbumService } from '../../akita-state/current-album.service';\nimport { NormalizedUserEntity } from '../../../../../../core/normalizr/types/models/normalized-user-entity';\n\n/**\n * Фотографии одного альбома\n */\n@Component({\n  selector: 'app-album-photos-page',\n  templateUrl: './album-photos-page.component.html',\n  styleUrls: ['./album-photos-page.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AlbumPhotosPageComponent implements OnInit {\n  breadcrumbs$: Observable<Breadcrumb[] | null> = this.currentAlbumQuery.selectBreadcrumbs();\n\n  album$: Observable<NormalizedAlbumEntity | null> = this.currentAlbumQuery.select('album');\n\n  albumLoadInProcess$: Observable<boolean> = this.currentAlbumQuery.selectLoading();\n\n  albumAuthor$: Observable<NormalizedUserEntity | null> = this.currentAlbumQuery.select('user');\n\n  albumAuthorLoadInProcess$: Observable<boolean> = this.currentAlbumQuery.select('userLoading');\n\n  photos$: Observable<NormalizedPhotoEntity[]> = this.photosQuery.selectAll();\n\n  isLastPage$: Observable<boolean> = this.photosQuery.isLastPage();\n\n  photosLoadInProcess$: Observable<boolean> = this.photosQuery.selectLoading();\n\n  constructor(\n    private photosService: PhotoListService,\n    private photosQuery: PhotoListQuery,\n    private currentAlbumQuery: CurrentAlbumQuery,\n    private currentAlbumService: CurrentAlbumService,\n    private route: ActivatedRoute,\n  ) {}\n\n  ngOnInit(): void {\n    this.route.params.subscribe((params) => {\n      const albumId = params['id'] as string;\n      this.photosService.getPhotos({\n        page: {\n          number: 1,\n          size: 36,\n        },\n        filter: [\n          {\n            field: 'albumId',\n            value: albumId,\n          },\n        ],\n      });\n      this.currentAlbumService.getAlbum(Number(albumId));\n    });\n  }\n\n  loadMore(): void {\n    this.photosService.getNextPhotos();\n  }\n}\n","import { Component, ChangeDetectionStrategy, Input } from '@angular/core';\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\nimport { NormalizedAlbumEntity } from '../../../../../../core/normalizr/types/models/normalized-album-entity';\nimport { NormalizedUserEntity } from '../../../../../../core/normalizr/types/models/normalized-user-entity';\n\n@Component({\n  selector: 'app-album-photos-title',\n  templateUrl: './album-photos-title.component.html',\n  styleUrls: ['./album-photos-title.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AlbumPhotosTitleComponent {\n  @Input() album: NormalizedAlbumEntity | null = null;\n\n  @Input() albumLoadInProcess = true;\n\n  @Input() albumAuthor: NormalizedUserEntity | null = null;\n\n  @Input() albumAuthorLoadInProcess = true;\n\n  faSpinner = faSpinner;\n}\n","<h2 *ngIf=\"album && !albumLoadInProcess\">\n  {{album.title}}\n</h2>\n<div *ngIf=\"albumAuthor && !albumAuthorLoadInProcess\" class=\"mb-2\">\n  By <a [routerLink]=\"['/', 'user', albumAuthor.id]\">{{albumAuthor.name}}</a>\n</div>\n\n<div *ngIf=\"albumLoadInProcess || albumAuthorLoadInProcess\">\n  <fa-icon [icon]=\"faSpinner\" [pulse]=\"true\" role=\"status\" data-testid=\"loading-spinner\">\n    <span class=\"sr-only\">Loading...</span>\n  </fa-icon>\n</div>\n"],"names":["EventEmitter","FormControl","FormGroup","asyncScheduler","throttleTime","UntilDestroy","untilDestroyed","AlbumPhotosFilterComponent","q","ngOnInit","group","valueChanges","pipe","trailing","subscribe","value","filter","push","field","changeFilter","emit","trackByAlbum","index","album","id","selectors","outputs","decls","vars","consts","template","i0","AlbumPhotosPageComponent","constructor","photosService","photosQuery","currentAlbumQuery","currentAlbumService","route","selectBreadcrumbs","select","selectLoading","selectAll","isLastPage","params","albumId","getPhotos","page","number","size","getAlbum","Number","loadMore","getNextPhotos","ctx"],"sourceRoot":"webpack:///"}